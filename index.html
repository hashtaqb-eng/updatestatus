<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">

<style>
body {
  font-family: Cairo;
  background: #0f0f0f;
  color: #fff;
  padding: 20px;
  direction: rtl;
}

.box {
  max-width: 400px;
  margin: auto;
  background: #151515;
  border-radius: 16px;
  padding: 25px;
  text-align: center;
}

select, button {
  width: 100%;
  padding: 14px;
  margin-top: 15px;
  border-radius: 10px;
  border: none;
  font-size: 16px;
}

select {
  background: #222;
  color: #fff;
}

button {
  background: #ff0055;
  color: white;
  font-weight: bold;
  cursor: pointer;
}

.msg {
  margin-top: 20px;
  font-weight: bold;
}
</style>
</head>

<body>

<div class="box">
  <h2>ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨</h2>
  <div id="orderInfo"></div>

  <select id="status">
    <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø­Ø§Ù„Ø©</option>
    <option value="Ù‚ÙŠØ¯ Ø§Ù„ØªØ¬Ù‡ÙŠØ²">ğŸŸ¡ Ù‚ÙŠØ¯ Ø§Ù„ØªØ¬Ù‡ÙŠØ²</option>
    <option value="Ù…Ø¹ Ø´Ø±ÙƒØ© Ø§Ù„Ø´Ø­Ù†">ğŸšš Ù…Ø¹ Ø´Ø±ÙƒØ© Ø§Ù„Ø´Ø­Ù†</option>
    <option value="ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…">âœ… ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…</option>
    <option value="ØªÙ… Ø§Ù„Ø¥Ù„ØºØ§Ø¡">âŒ ØªÙ… Ø§Ù„Ø¥Ù„ØºØ§Ø¡</option>
  </select>

  <button onclick="updateStatus()">Ø­ÙØ¸ Ø§Ù„Ø­Ø§Ù„Ø©</button>
  <div class="msg" id="msg"></div>
</div>

<script>
const API ="https://script.google.com/macros/s/AKfycbyahH6-LMwOFYHqfJATiZb94NiVpdk0hv8yHNp2eiVGvkTZHPyX1Kt-9AMP8bDxaTM_Cg/exec";

const params = new URLSearchParams(window.location.search);
const orderId = params.get("orderId");
const pin = params.get("pin");

// Ø­Ù…Ø§ÙŠØ© PIN
if (pin !== "1234") {
  document.body.innerHTML =
    "<h2 style='color:red;text-align:center'>ğŸš« Ø¯Ø®ÙˆÙ„ ØºÙŠØ± Ù…ØµØ±Ø­</h2>";
  throw new Error("UNAUTHORIZED");
}

document.getElementById("orderInfo").innerText =
  orderId ? "Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨: " + orderId : "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø±Ù‚Ù… Ø·Ù„Ø¨";

function updateStatus() {
  const status = document.getElementById("status").value;

  if (!orderId || !status) {
    alert("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø­Ø§Ù„Ø©");
    return;
  }

  fetch(`${API}?action=updateStatus&orderId=${encodeURIComponent(orderId)}&status=${encodeURIComponent(status)}&pin=${encodeURIComponent(pin)}`)
    .then(r => r.json())
    .then(data => {
      document.getElementById("msg").innerText =
        data.success ? "âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­" : "âŒ " + data.message;
    })
    .catch(() => {
      document.getElementById("msg").innerText = "âš ï¸ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„";
    });
}
</script>

</body>
</html>



